<%- include('../layouts/header.ejs') %>
<%- include('../layouts/navbar.ejs') %>
<%- include('../layouts/sidebar.ejs') %>

<div class="main-panel">
  <div class="content-wrapper">
    <div class="row">
      <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">COUPON</h4>
            <div class="row justify-content-end">
              <div class="col-auto">
                <a href="/admin/addCoupon"><button type="button" class="btn btn-primary">Add Coupon</button></a>
              </div>
            </div>                  
            <div class="table-responsive text-center">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th class="text-center">
                      No.
                    </th>
                    <th class="text-center">
                      Coupon
                    </th>
                    <th class="text-center">
                      Max Discount
                    </th>
                    <th class="text-center">
                      Expiry date
                    </th>
                    <th class="text-center">
                      Amount
                    </th>
                    <th class="text-center">
                      Percentage
                    </th>
                    <th class="text-center">
                      Action
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <% couponData.forEach((x,index)=>{%>
                    <tr>
                      <th scope="row"><%= index+1 %></th>
                      <td><%=x.code%></td>
                      <td><%=x.maxDiscount %></td>
                      <td><%=x.expirydate.toLocaleString('en-us', { day: '2-digit', month: '2-digit', year: '2-digit' })%></td>
                      <td><%=x.minPurchaseAmount%></td>
                      <td><%=x.percentage%></td>
    
                      <td>
                        <a href="/admin/products/editCoupon/<%=x._id%>"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="Blue" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                          </svg>
                        </a>
    
                        <a href="/admin/deleteCoupon/<%=x._id%>">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="Black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                          </svg>
                        </a>
                      </td>
                    </tr>
    
                    <% });%>
                </tbody>
                <% if(typeof message !== 'undefined'){ %>
                  <p style="color: brown;"><%- message %> </p>
                  <% } %>
              </table>
            </div>
          </div>
        </div>
      </div>

 <%- include('../layouts/footer.ejs') %>